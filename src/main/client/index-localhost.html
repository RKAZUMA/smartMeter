<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<title> smart meter </title>
	<link rel="stylesheet" type="text/css" href="dj.css" />

	<!-- The index-localhost file is for working in the train with no network -->
	<!-- -->
	<script type="text/javascript">
		/*
		 for debugging while using local files I'd like to set the baseURL to my 
		 first smartmeter at home otherwise the baseURL should be an empty string 
		 an all further requests relative to the original document
		 */
		var baseURL = "",
			myUrl = document.URL.split("/index.html")[0];

		if (!window.location.origin)
			window.location.origin = window.location.protocol+"//"+window.location.host;
		baseURL = window.location.origin;
		console.log ("baseURL="+baseURL);
		console.log ("document.URL: "+document.URL);


     	if (!document.URL.indexOf("file://")) {
     		console.log ("this is a dev system on "+document.URL);
     		baseURL="http://krukas.no-ip.org:42080";     		
     	}
	</script>

	<script src="getEnergyObject.js" type="text/javascript"></script>
	<script src="plotData.js" type="text/javascript"></script>
	<script src="/socket.io/socket.io.js" type="text/javascript"></script>
	<script src="protovis.min.js" type="text/javascript"></script>
	<script src="jquery.min.js" type="text/javascript"></script>
</head>


<body>
	<h1>Energy Meter</h1>

	<script type="text/javascript">
		var eo = new energyObject({
			title: "smart meter",
			webSocketDomain: baseURL,  // for the webSocket, on which new data will be listened on
			URL: baseURL + '/smartMeter' // for the get data request
		}).listenOnGotDataEvent().getData(2000);		
	</script>

</body>
</html>
