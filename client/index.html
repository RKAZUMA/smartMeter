<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	<title> smart meter </title>
	<link rel="stylesheet" type="text/css" href="dj.css" />

	<!-- I would like to have a general dev/prod switch here that allows me to test in the train without internet conneciton -->
	<!--
	<script type="text/javascript">
	var baseURL="http://127.0.0.1:8127";
	</script>
	<script src="protovis.min.js" type="text/javascript"></script>
	<script src="http://127.0.0.1/~docjoe/jquery-1.7.1.min.js" type="text/javascript"></script>
	-->

	<script type="text/javascript">
		// for debugging while using local files I'd like to set the baseURL to my first smartmeter at home
		// otherwise the baseURL should be an empty string an all further requests relative 
		// to the original document
		var baseURL ="";
     	if (!document.URL.indexOf("file://")) 
     		baseURL="http://krukas.no-ip.org:42080";
     	else
	     	// if document.URL.indexOf("localhost"), then I am most probably sitting in a train
    	 	// with no internet connection and I want to load the .js files locally...
    		if (document.URL.indexOf("http://localhost:") == 0) {
    			alert ("you still got to build that localhost switch");
    			var baseURL="http://127.0.0.1:8127";
    		}

	</script>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"
					type="text/javascript"></script>
	<script src="http://mbostock.github.io/protovis/protovis-r3.2.js"
					type="text/javascript"></script>
	<script src="socket.io.min.js"></script>
	<script src="plotData.js" type="text/javascript"></script>
	<script src="getEnergyObject.js" type="text/javascript"></script>
</head>
<body onload="$('h1').addClass('redFlash')" >
	<h1>Energy Meter</h1>

	<script type="text/javascript">
		var V39energy = new energyObject({
			title: "smart meter of V39",
			webSocketDomain: baseURL,  // for the webSocket, on which new data will be listened on
			URL: baseURL + '/smartMeter' // for the get data request
		}).listenOnGotDataEvent().getData(2000);
	</script>

</body>
</html>